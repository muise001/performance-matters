var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in o,i=e.webkitRequestFileSystem,a=e.requestFileSystem||i||e.mozRequestFileSystem,c=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},f="application/octet-stream",s=0,u=function(t){var o=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};e.chrome?o():setTimeout(o,500)},d=function(e,t,n){for(var o=(t=[].concat(t)).length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){c(e)}}},l=function(c,l){var p,v,w,y,m,h=this,S=c.type,O=!1,b=function(){d(h,"writestart progress write writeend".split(" "))},E=function(){(!O&&p||(p=n().createObjectURL(c)),v)?v.location.href=p:null==e.open(p,"_blank")&&"undefined"!=typeof safari&&(e.location.href=p);h.readyState=h.DONE,b(),u(p)},R=function(e){return function(){if(h.readyState!==h.DONE)return e.apply(this,arguments)}},g={create:!0,exclusive:!1};if(h.readyState=h.INIT,l||(l="download"),r)return p=n().createObjectURL(c),o.href=p,o.download=l,y=o,(m=t.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),y.dispatchEvent(m),h.readyState=h.DONE,b(),void u(p);/^\s*(?:text\/(?:plain|xml)|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)&&(c=new Blob(["\ufeff",c],{type:c.type})),e.chrome&&S&&S!==f&&(w=c.slice||c.webkitSlice,c=w.call(c,0,c.size,f),O=!0),i&&"download"!==l&&(l+=".download"),(S===f||i)&&(v=e),a?(s+=c.size,a(e.TEMPORARY,s,R(function(e){e.root.getDirectory("saved",g,R(function(e){var t=function(){e.getFile(l,g,R(function(e){e.createWriter(R(function(t){t.onwriteend=function(t){v.location.href=e.toURL(),h.readyState=h.DONE,d(h,"writeend",t),u(e)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&E()},"writestart progress write abort".split(" ").forEach(function(e){t["on"+e]=h["on"+e]}),t.write(c),h.abort=function(){t.abort(),h.readyState=h.DONE},h.readyState=h.WRITING}),E)}),E)};e.getFile(l,{create:!1},R(function(e){e.remove(),t()}),R(function(e){e.code===e.NOT_FOUND_ERR?t():E()}))}),E)}),E)):E()},p=l.prototype;return p.abort=function(){this.readyState=this.DONE,d(this,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,function(e,t){return new l(e,t)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs});
